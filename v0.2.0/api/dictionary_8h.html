<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FSDict: fsdict/INIConfig/dictionary.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_be8ab679fc51160618ea2246e96ed4da.html">fsdict</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_f122a75addb0c28611fad55725c1c157.html">INIConfig</a>
  </div>
</div>
<div class="contents">
<h1>dictionary.h File Reference</h1>
<p>Implements a dictionary for string variables.  
<a href="#_details">More...</a></p>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__dictionary__.html">_dictionary_</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dictionary object.  <a href="struct__dictionary__.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__dictionary__.html">_dictionary_</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8h.html#a5bd3b2ce42b776c76755ec65642f43af">dictionary</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dictionary object.  <a href="#a5bd3b2ce42b776c76755ec65642f43af"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8h.html#a680f87f4b4315b2651a24eb81b925a6b">dictionary_hash</a> (char const *key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the hash key for a string.  <a href="#a680f87f4b4315b2651a24eb81b925a6b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct__dictionary__.html">dictionary</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8h.html#a9f584d70e3559fe6fe5f62a112bc7b17">dictionary_new</a> (int size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new dictionary object.  <a href="#a9f584d70e3559fe6fe5f62a112bc7b17"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8h.html#a9d792f2544cf674a371663e2f32128fa">dictionary_del</a> (<a class="el" href="struct__dictionary__.html">dictionary</a> *vd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a dictionary object.  <a href="#a9d792f2544cf674a371663e2f32128fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8h.html#ac9d0e02363aa4220eef57a72949e1693">dictionary_get</a> (<a class="el" href="struct__dictionary__.html">dictionary</a> *d, char *key, char *def)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a value from a dictionary.  <a href="#ac9d0e02363aa4220eef57a72949e1693"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8h.html#ac2190340f6755e7b8dcf0448bee1faf6">dictionary_set</a> (<a class="el" href="struct__dictionary__.html">dictionary</a> *vd, char const *key, char const *val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a value in a dictionary.  <a href="#ac2190340f6755e7b8dcf0448bee1faf6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8h.html#a108b89bce8d154d4a9f489cbc89f8b9e">dictionary_unset</a> (<a class="el" href="struct__dictionary__.html">dictionary</a> *d, char *key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a key in a dictionary.  <a href="#a108b89bce8d154d4a9f489cbc89f8b9e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8h.html#a6e29ecf9c79331b1c6c26cd662cba042">dictionary_dump</a> (<a class="el" href="struct__dictionary__.html">dictionary</a> *d, FILE *out)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dump a dictionary to an opened file pointer.  <a href="#a6e29ecf9c79331b1c6c26cd662cba042"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Implements a dictionary for string variables. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>N. Devillard </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Sep 2007 </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Revision</b></dt><dd>1.12 </dd></dl>
<p>This module implements a simple dictionary object, i.e. a list of string/string associations. This object is useful to store e.g. informations retrieved from a configuration file (ini files). </p>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a5bd3b2ce42b776c76755ec65642f43af"></a><!-- doxytag: member="dictionary.h::dictionary" ref="a5bd3b2ce42b776c76755ec65642f43af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__dictionary__.html">_dictionary_</a>  <a class="el" href="struct__dictionary__.html">dictionary</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dictionary object. </p>
<p>This object contains a list of string/string associations. Each association is identified by a unique string key. Looking up values in the dictionary is speeded up by the use of a (hopefully collision-free) hash function. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a680f87f4b4315b2651a24eb81b925a6b"></a><!-- doxytag: member="dictionary.h::dictionary_hash" ref="a680f87f4b4315b2651a24eb81b925a6b" args="(char const *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned dictionary_hash </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>key</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute the hash key for a string. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>Character string to use for key. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 unsigned int on at least 32 bits.</dd></dl>
<p>This hash function has been taken from an Article in Dr Dobbs Journal. This is normally a collision-free function, distributing keys evenly. The key is stored anyway in the struct so that collision can be avoided by comparing the key itself in last resort. </p>

</div>
</div>
<a class="anchor" id="a9f584d70e3559fe6fe5f62a112bc7b17"></a><!-- doxytag: member="dictionary.h::dictionary_new" ref="a9f584d70e3559fe6fe5f62a112bc7b17" args="(int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__dictionary__.html">dictionary</a>* dictionary_new </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new dictionary object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Optional initial size of the dictionary. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 newly allocated dictionary objet.</dd></dl>
<p>This function allocates a new dictionary object of given size and returns it. If you do not know in advance (roughly) the number of entries in the dictionary, give size=0. </p>

<p>Referenced by <a class="el" href="INIParser_8cxx_source.html#l00590">iniparser_load()</a>.</p>

</div>
</div>
<a class="anchor" id="a9d792f2544cf674a371663e2f32128fa"></a><!-- doxytag: member="dictionary.h::dictionary_del" ref="a9d792f2544cf674a371663e2f32128fa" args="(dictionary *vd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dictionary_del </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__dictionary__.html">dictionary</a> *&nbsp;</td>
          <td class="paramname"> <em>vd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete a dictionary object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>dictionary object to deallocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void</dd></dl>
<p>Deallocate a dictionary object and all memory associated to it. </p>

<p>Referenced by <a class="el" href="INIParser_8cxx_source.html#l00723">iniparser_freedict()</a>, and <a class="el" href="INIParser_8cxx_source.html#l00590">iniparser_load()</a>.</p>

</div>
</div>
<a class="anchor" id="ac9d0e02363aa4220eef57a72949e1693"></a><!-- doxytag: member="dictionary.h::dictionary_get" ref="ac9d0e02363aa4220eef57a72949e1693" args="(dictionary *d, char *key, char *def)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dictionary_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__dictionary__.html">dictionary</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>def</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a value from a dictionary. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>dictionary object to search. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>Key to look for in the dictionary. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>def</em>&nbsp;</td><td>Default value to return if key not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 pointer to internally allocated character string.</dd></dl>
<p>This function locates a key in a dictionary and returns a pointer to its value, or the passed 'def' pointer if no such key can be found in dictionary. The returned character pointer points to data internal to the dictionary object, you should not try to free it or modify it. </p>

<p>Referenced by <a class="el" href="INIParser_8cxx_source.html#l00293">iniparser_getstring()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2190340f6755e7b8dcf0448bee1faf6"></a><!-- doxytag: member="dictionary.h::dictionary_set" ref="ac2190340f6755e7b8dcf0448bee1faf6" args="(dictionary *vd, char const *key, char const *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dictionary_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__dictionary__.html">dictionary</a> *&nbsp;</td>
          <td class="paramname"> <em>vd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set a value in a dictionary. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>dictionary object to modify. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>Key to modify or add. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>Value to add. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>int 0 if Ok, anything else otherwise</dd></dl>
<p>If the given key is found in the dictionary, the associated value is replaced by the provided one. If the key cannot be found in the dictionary, it is added to it.</p>
<p>It is Ok to provide a NULL value for val, but NULL values for the dictionary or the key are considered as errors: the function will return immediately in such a case.</p>
<p>Notice that if you dictionary_set a variable to NULL, a call to dictionary_get will return a NULL value: the variable will be found, and its value (NULL) is returned. In other words, setting the variable content to NULL is equivalent to deleting the variable from the dictionary. It is not possible (in this implementation) to have a key in the dictionary without value.</p>
<p>This function returns non-zero in case of failure. </p>

<p>Referenced by <a class="el" href="INIParser_8cxx_source.html#l00590">iniparser_load()</a>, and <a class="el" href="INIParser_8cxx_source.html#l00463">iniparser_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a108b89bce8d154d4a9f489cbc89f8b9e"></a><!-- doxytag: member="dictionary.h::dictionary_unset" ref="a108b89bce8d154d4a9f489cbc89f8b9e" args="(dictionary *d, char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dictionary_unset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__dictionary__.html">dictionary</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete a key in a dictionary. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>dictionary object to modify. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>Key to remove. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void</dd></dl>
<p>This function deletes a key in a dictionary. Nothing is done if the key cannot be found. </p>

<p>Referenced by <a class="el" href="INIParser_8cxx_source.html#l00499">iniparser_unset()</a>.</p>

</div>
</div>
<a class="anchor" id="a6e29ecf9c79331b1c6c26cd662cba042"></a><!-- doxytag: member="dictionary.h::dictionary_dump" ref="a6e29ecf9c79331b1c6c26cd662cba042" args="(dictionary *d, FILE *out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dictionary_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__dictionary__.html">dictionary</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>out</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dump a dictionary to an opened file pointer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>Dictionary to dump </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>Opened file pointer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void</dd></dl>
<p>Dumps a dictionary onto an opened file pointer. Key pairs are printed out as <code></code>[Key]=[Value], one per line. It is Ok to provide stdout or stderr as output file pointers. </p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Jun 4 23:33:00 2014 for FSDict by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
